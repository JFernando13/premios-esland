import{h as g,p as f}from"./hooks.module.dxZU798w.js";import{u as e}from"./jsxRuntime.module.Jvx7hqTl.js";import{g as x}from"./preact.module.dOkjm3yY.js";/* empty css                      */const y=[{categoryName:"CLIP DEL AÑO",candidates:[{name:"auronplay",image:"clip_auronplay.webp",link:"https://youtu.be/PgElNgWZ8_A",id:"1-1"},{name:"CrystalMolly",image:"clip_crystalmolly.webp",link:"https://youtu.be/HCwkfjY4Yss",id:"1-2"},{name:"Gemita",image:"clip_gemita.webp",link:"https://youtu.be/Spx5iJhvx2s",id:"1-3"},{name:"Guanyar",image:"clip_guanyar.webp",link:"https://youtu.be/7CYxEp2zMvU",id:"1-4"},{name:"IlloJuan y elBokeron",image:"clip_IlloJuan_elBokeron.webp",link:"https://youtu.be/RTH6rQrMzU8",id:"1-5"},{name:"Lacuevadepaink",image:"lacueva.webp",link:"https://youtu.be/hwEb5Q2lS9g",id:"1-6"},{name:"PipePunk",image:"clip_pipepunk.webp",link:"https://youtu.be/7Lgbn_5FC0Q",id:"1-7"},{name:"Repta Live",image:"clip_Reptalive.webp",link:"https://youtu.be/ox1AA0Es1Rs",id:"1-8"},{name:"Rubius",image:"clip_Rubius.webp",link:"https://youtu.be/aQBVPdnOhwU",id:"1-9"},{name:"xCry",image:"clip_xCry.webp",link:"https://youtu.be/xH9rkX1nWHU",id:"1-10"}],id:"1"},{categoryName:"ENFADO DEL AÑO",candidates:[{name:"agustin51",image:"enfado_agustin51.webp",link:"https://youtu.be/ZPC2aqWprg0",id:"2-1"},{name:"DjMaRiiO",image:"enfado_djmariio.webp",link:"https://youtu.be/v3Qc76YRN8w",id:"2-2"},{name:"elxokas",image:"enfado_xokas.webp",link:"https://youtu.be/7CgC0rwUGq4",id:"2-3"},{name:"Ibai y Messi",image:"enfado_ibaimessi.webp",link:"https://youtu.be/4NF5GWq2l3U",id:"2-4"},{name:"Nissaxter",image:"enfado_nissaxter.webp",link:"https://youtu.be/gRZ3Yg7Kn9M",id:"2-5"},{name:"PipePunk",image:"enfado_pipepunk.webp",link:"https://youtu.be/wlv0yjukL0Y",id:"2-6"},{name:"rickyedit",image:"enfado_rickyedit.webp",link:"https://youtu.be/TktrcK_Qxyk",id:"2-7"},{name:"rivers_gg",image:"enfado_riversgg.webp",link:"https://youtu.be/8qB1rCDpbCI",id:"2-8"},{name:"sezarbluelive",image:"enfado_sezarbluelive.webp",link:"https://youtu.be/FQ56XmrtH2o",id:"2-9"},{name:"WestCOL",image:"enfado_westcol.webp",link:"https://youtu.be/pQmah35sQSg",id:"2-10"}],id:"2"},{categoryName:"STREAMER IRL DEL AÑO",candidates:[{name:"Alanalarana",image:"alanalarana.webp",link:null,id:"3-1"},{name:"ArrozyDesgracias",image:"Arrozydesgracias.webp",link:null,id:"3-2"},{name:"Brunenger",image:"brunenger.webp",link:null,id:"3-3"},{name:"Grenheir",image:"Grenheir.webp",link:null,id:"3-4"},{name:"JapanJordi",image:"Japanjordi.webp",link:null,id:"3-5"},{name:"Kidi",image:"kidi.webp",link:null,id:"3-6"},{name:"llunaclark",image:"llunaclark.webp",link:null,id:"3-7"},{name:"MarioTaxi",image:"mariotaxi.webp",link:null,id:"3-8"},{name:"MarioTQ",image:"mariotq.webp",link:null,id:"3-9"},{name:"viviendoenlacalle",image:"Viviendoenlacalle.webp",link:null,id:"3-10"}],id:"3"},{categoryName:"MEJOR VARIETY STREAMER",candidates:[{name:"aldo_geo",image:"aldo_geo.webp",link:null,id:"4-1"},{name:"alexelcapo",image:"alexelcapo.webp",link:null,id:"4-2"},{name:"Carola",image:"carola.webp",link:null,id:"4-3"},{name:"elded",image:"elded.webp",link:null,id:"4-4"},{name:"ElMariana",image:"elmariana.webp",link:null,id:"4-5"},{name:"IlloJuan",image:"illojuan.webp",link:null,id:"4-6"},{name:"knekro",image:"knekro.webp",link:null,id:"4-7"},{name:"rivers_gg",image:"riversgg.webp",link:null,id:"4-8"},{name:"Roier",image:"roier.webp",link:null,id:"4-9"},{name:"Rubius",image:"rubius.webp",link:null,id:"4-10"}],id:"4"},{categoryName:"MEJOR COBERTURA INFORMATIVA",candidates:[{name:"davooxeneize",image:"davooxeneize.webp",link:null,id:"5-1"},{name:"el_yuste",image:"el_yuste.webp",link:null,id:"5-2"},{name:"Flavio Azzaro",image:"Flavioazzaro.webp",link:null,id:"5-3"},{name:"gerardromero",image:"GerardRomero.webp",link:null,id:"5-4"},{name:"Julio Astillero",image:"julioastillero.webp",link:null,id:"5-5"},{name:"Kilometro Cero",image:"km0.webp",link:null,id:"5-6"},{name:"La Secta Deportiva",image:"lasectadeportiva.webp",link:null,id:"5-7"},{name:"LACOBRAAA",image:"lacobraaa.webp",link:null,id:"5-8"},{name:"rubenmartinweb",image:"rubenmartinweb.webp",link:null,id:"5-9"},{name:"ZonaFUT",image:"zonafut.webp",link:null,id:"5-10"}],id:"5"},{categoryName:"ROLEPLAYER DEL AÑO",candidates:[{name:"AgenteMaxo",image:"agentemaxo.webp",link:null,id:"6-1"},{name:"DessT3",image:"desst3.webp",link:null,id:"6-2"},{name:"epidemic77",image:"epidemic77.webp",link:null,id:"6-3"},{name:"Eskimalito",image:"eskimalitto.webp",link:null,id:"6-4"},{name:"FolagorLives",image:"folagorlives.webp",link:null,id:"6-5"},{name:"kenaivsouza",image:"kenalvsouza.webp",link:null,id:"6-6"},{name:"Nexxuz",image:"nexxusz.webp",link:null,id:"6-7"},{name:"RDjavi",image:"rdjavi.webp",link:null,id:"6-8"},{name:"Roier",image:"roier.webp",link:null,id:"6-9"},{name:"TomateKing",image:"tomateking.webp",link:null,id:"6-10"}],id:"6"},{categoryName:"STREAMER PROMESA",candidates:[{name:"angelogam3r",image:"angelogam3r.webp",link:"https://www.twitch.tv/angelogam3r",id:"7-1"},{name:"chaleselcrackk",image:"Chaleselcrack.webp",link:"https://www.twitch.tv/chaleselcrackk",id:"7-2"},{name:"futbolcontemo7",image:"furbolcontemo7.webp",link:"https://www.twitch.tv/futbolcontemo7",id:"7-3"},{name:"iaguirregabiria",image:"iaguirregabiria.webp",link:"https://www.twitch.tv/iaguirregabiria",id:"7-4"},{name:"KotaroHayama_",image:"kotarohayama_.webp",link:"https://www.twitch.tv/kotarohayama_",id:"7-5"},{name:"Mechaaax",image:"mechaaax.webp",link:"https://www.twitch.tv/mechaaax",id:"7-6"},{name:"paaulacg_",image:"paaulacg_.webp",link:"https://www.twitch.tv/paaulacg_",id:"7-7"},{name:"ReyDeLaCity",image:"reydelacity.webp",link:"https://www.twitch.tv/reydelacity",id:"7-8"},{name:"SoyBB7",image:"soybb7.webp",link:"https://www.twitch.tv/soybb7",id:"7-9"},{name:"soycande30",image:"soyCande30.webp",link:"https://www.twitch.tv/soycande30",id:"7-10"}],id:"7"},{categoryName:"MEJOR MINISERIE DE CONTENIDO",candidates:[{name:"7 Dias Para Palmarla",image:"7dias.webp",link:null,id:"8-1"},{name:"Backrooms",image:"Backrooms.webp",link:null,id:"8-2"},{name:"BELLUM",image:"BELLUM.webp",link:null,id:"8-3"},{name:"El Cielo",image:"El_cielo.webp",link:null,id:"8-4"},{name:"El Hoyo en Minecraft",image:"El_Hoyo_en_Minecraft.webp",link:null,id:"8-5"},{name:"Escondite en Francia",image:"Escondite_en_Francia.webp",link:null,id:"8-6"},{name:"Garry's Deluxe",image:"Garrys_Deluxe.webp",link:null,id:"8-7"},{name:"Hormigeo 2",image:"Hormigeo_2.webp",link:null,id:"8-8"},{name:"PermadeaZ 2",image:"PermadeaZ_2.webp",link:null,id:"8-9"},{name:"Squid Craft Games 2",image:"Squid_Craft_Games 2.webp",link:null,id:"8-10"}],id:"8"},{categoryName:"EVENTO DEL AÑO",candidates:[{name:"24 horas en el Obelisco",image:"24h_en_el_obelisco.webp",link:null,id:"9-1"},{name:"Coscu Army Awards 2023",image:"Coscu_Army_Awards.webp",link:null,id:"9-2"},{name:"Dogfight Wild Tournament",image:"Dogfight_wild_tournament.webp",link:null,id:"9-3"},{name:"El ultimo en levantar las manos",image:"ULTIMO_EN_LEVANTAR_LAS_MANOS.webp",link:null,id:"9-4"},{name:"Final Four desde el Spotify Camp Nou",image:"Kings_League.webp",link:null,id:"9-5"},{name:"King of the Ring",image:"King_of_the_Ring.webp",link:null,id:"9-6"},{name:"La Velada del Año III",image:"Velada_III.webp",link:null,id:"9-7"},{name:"Parense de manos",image:"Parense_de_Manos.webp",link:null,id:"9-8"},{name:"Partidazo de Youtubers 4",image:"Partidazo_Youtubers4.webp",link:null,id:"9-9"},{name:"Stream Fighters 2",image:"Stream_Fighters_2.webp",link:null,id:"9-10"}],id:"9"},{categoryName:"STREAMER REVELACION",candidates:[{name:"adricontreras4",image:"adricontreras4.webp",link:null,id:"10-1"},{name:"davooxeneize",image:"davooxeneize.webp",link:null,id:"10-2"},{name:"nilojeda",image:"nilojeda.webp",link:null,id:"10-3"},{name:"Poloteli",image:"poloteli.webp",link:null,id:"10-4"},{name:"RDjavi",image:"rdjavi.webp",link:null,id:"10-5"},{name:"rene8808",image:"rene8808.webp",link:null,id:"10-6"},{name:"Roier",image:"roier.webp",link:null,id:"10-7"},{name:"Spursito",image:"spursito.webp",link:null,id:"10-8"},{name:"WestCOL",image:"westcol.webp",link:null,id:"10-9"},{name:"xCry",image:"xcry.webp",link:null,id:"10-10"}],id:"10"},{categoryName:"MEJOR SERIE DE CONTENIDO",candidates:[{name:"DEDsafio ARK",image:"DEDsafio_ARK.webp",link:null,id:"11-1"},{name:"El Dios de Todo",image:"El_Dios_de_Todo.webp",link:null,id:"11-2"},{name:"Exodo",image:"Exodo.webp",link:null,id:"11-3"},{name:"Experimento Hardcore",image:"Experimento_Hardcore.webp",link:null,id:"11-4"},{name:"Minecraft Extremo",image:"Minecraft_Extremo.webp",link:null,id:"11-5"},{name:"Mundial F1 Online 2",image:"Mundial_Fl_Online_2.webp",link:null,id:"11-6"},{name:"Pokemon Twitch Cup 3",image:"Pokemon_Twitch_Cup_3.webp",link:null,id:"11-7"},{name:"Proyecto176",image:"Proyecto176.webp",link:null,id:"11-8"},{name:"Reinos Enfrentados 3",image:"Reinos_Enfrentados_3.webp",link:null,id:"11-9"},{name:"Timeland",image:"timeland.webp",link:null,id:"11-10"}],id:"11"},{categoryName:"STREAMER DEL AÑO",candidates:[{name:"DjMaRiiO",image:"djmariio.webp",link:null,id:"12-1"},{name:"ElMariana",image:"elmariana.webp",link:null,id:"12-2"},{name:"ElSpreen",image:"spreen.webp",link:null,id:"12-3"},{name:"elxokas",image:"elxokas.webp",link:null,id:"12-4"},{name:"Ibai",image:"ibai.webp",link:null,id:"12-5"},{name:"IlloJuan",image:"illojuan.webp",link:null,id:"12-6"},{name:"rivers_gg",image:"riversgg.webp",link:null,id:"12-7"},{name:"Rubius",image:"rubius.webp",link:null,id:"12-8"},{name:"WestCOL",image:"westcol.webp",link:null,id:"12-9"}],id:"12"}];function v({previousPage:a,allVotes:i,goToSpecificPage:n}){const[l,t]=g(!1),[o,r]=g(!1),b=async()=>{t(!0);try{if(!(await fetch("/api/votes",{method:"POST",body:JSON.stringify({votes:i})})).ok)return r(!0);a(),r(!1)}catch{r(!0)}finally{t(!1)}};return o?e("p",{class:"first-letter:uppercase text-3xl lg:text-5xl font-semibold tracking-wide text-balance text-center",children:"Hubo un error al conectarse con la base datos. Por favor vuelva a intentarlo."}):e("section",{class:"flex flex-col gap-20",children:[e("section",{class:"flex flex-col gap-8",children:[e("h1",{class:"first-letter:uppercase text-3xl lg:text-5xl font-semibold tracking-wide text-balance text-center",children:"tus votos finales"}),e("section",{class:"grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-2",children:y.map((p,s)=>{const c=i[s],u=p.candidates.flatMap(m=>c.includes(m.id)&&m),d=m=>m&&typeof m=="object",h=u.filter(d);return e("article",{class:`bg-[#1682c7] hover:scale-105 hover:bg-[#54beff] transition-all flex flex-col items-center justify-center text-center h-44 ${l&&"opacity-55"}`,onClick:()=>!l&&n(s+1),children:[e("picture",{class:"flex-1 grid grid-cols-2 h-full w-full",children:h.map(m=>e("img",{src:`/images/candidates/${m.image}`,alt:m.name,class:"h-full object-cover object-center"}))}),e("h2",{class:"h-[30%] flex justify-center items-center font-semibold",children:p.categoryName})]})})})]}),e("article",{class:"flex flex-col gap-4",children:[e("button",{class:"text-xl lg:text-2xl font-medium px-5 py-3 rounded-full uppercase text-blue-950 animate-fade-up bg-white hover:scale-125 hover:bg-yellow-300 hover:border-yellow-400 transition w-max self-center",onClick:b,children:l?"enviando votos...":"enviar mis votos"}),e("button",{onClick:()=>!l&&a,class:`hover:underline transition-all duration-1000 ${l&&"opacity-50"}`,children:"Editar mis votos"})]})]})}function _(){return e("svg",{width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",children:[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M12 1.67c.955 0 1.845 .467 2.39 1.247l.105 .16l8.114 13.548a2.914 2.914 0 0 1 -2.307 4.363l-.195 .008h-16.225a2.914 2.914 0 0 1 -2.582 -4.2l.099 -.185l8.11 -13.538a2.914 2.914 0 0 1 2.491 -1.403zm.01 13.33l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007zm-.01 -7a1 1 0 0 0 -.993 .883l-.007 .117v4l.007 .117a1 1 0 0 0 1.986 0l.007 -.117v-4l-.007 -.117a1 1 0 0 0 -.993 -.883z","stroke-width":"0",fill:"currentColor"})]})}const E=({children:a,isChanging:i})=>e("h1",{class:"relative tracking-[1px] font-tomaso text-xl sm:text-3xl text-center leading-snug flex justify-center items-center text-white",children:[e("svg",{class:`h-60 w-24 fill-current ${i?"translate-x-[6.5rem] sm:translate-x-[8.5rem]":"translate-x-9 sm:translate-x-0"} transition duration-500`,viewBox:"0 0 90.35 240.43",children:e("path",{d:"m142.7 234.66-52.79 7.45L142.7 39.4 52.35 279.83z",transform:"translate(-52.35 -39.4)"})}),e("div",{class:"flex justify-center items-center flex-col gap-y-4 w-72 px-10",children:[e("svg",{class:`absolute ${i?"scale-[1.2] sm:scale-[1.7] -translate-y-0":"scale-100 -translate-y-28"} h-14 fill-current transition duration-500`,viewBox:"0 0 16.04 62.55",children:e("path",{d:"m300 38.16-8.02 46.7 8.02 15.85 8.02-15.85z",transform:"translate(-291.98 -38.16)"})}),e("span",{class:`${i?"invisible opacity-0":"visible opacity-100"} delay-75 transition duration-300`,children:a})]}),e("svg",{class:`h-60 w-24 fill-current ${i?"-translate-x-[6.5rem] sm:-translate-x-[8.5rem]":"-translate-x-9 sm:translate-x-0"} transition duration-500`,viewBox:"0 0 90.35 240.43",children:e("path",{d:"m457.3 234.66 52.79 7.45L457.3 39.4l90.35 240.43z",transform:"translate(-457.3 -39.4)"})})]});function C({categoryName:a,isChanging:i,votes:n}){return e(x,{children:[e(E,{isChanging:i,children:a}),e("div",{class:"flex flex-col justify-center items-center gap-2",children:e("p",{class:"text-yellow-300 font-bold flex gap-2 items-center",children:[e("span",{class:"text-xl capitalize",children:"votos realizados"}),e("span",{class:"text-3xl",children:[n.byCategory.length,"/",n.maxVotes]})]})}),n.hasMissingVotes&&e("div",{class:`text-red-800 capitalize font-semibold fixed bottom-8 right-14 bg-white px-6 py-4 z-10 rounded-lg flex items-center gap-3 ${n.hasMissingVotes?"animate-fade-down":"animate-fade-up"}`,children:[e(_,{}),"faltan votos por realizar"]})]})}function R(){return e("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",children:[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",d:"M17.3213 14.501c-.3204-.1755-.5195-.5117-.5195-.877v-3.2467c0-.3653.1991-.70155.5195-.87706l3.6075-1.9761c.6664-.36506 1.4804.11718 1.4804.87703v7.19893c0 .7598-.814 1.2421-1.4804.877l-3.6075-1.9761ZM8.43066 8.53223h4.12974v4.12967M5.91504 15.1943 12.438 8.67136"}),e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",d:"M3.59082 19.499c-1.10457 0-2-.8954-2-2V6.50193c0-1.10457.89543-2 2-2H14.8013c1.1045 0 2 .89543 2 2V17.499c0 1.1046-.8955 2-2 2H3.59082Z"})]})}function A({candidate:a,isChanging:i,index:n,handleVote:l,voteIndex:t}){const o=n*80+"ms",r=t>0;return e("article",{class:`${r?"bg-yellow-500 text-white":"bg-[#1682c7] hover:bg-sky-400 text-white"} h-full flex flex-col p-1 gap-1 rounded-md md:hover:scale-105 transition-all shadow-md shadow-black/20 ${i?"animate-fade-up":""} group`,style:{animationDelay:o},onClick:()=>l({candidateID:a.id}),children:[e("picture",{class:"flex-1 h-full flex flex-col gap-1 relative",children:[e("div",{class:"flex justify-between z-10 items-center px-2 py-1",children:[t>0&&e("span",{class:"rounded-full grid place-content-center w-6 h-6 text-sm font-bold bg-yellow-500",children:t}),e("a",{href:a.link??"",target:"_blank",class:"p-1 bg-white text-black rounded-full cursor-pointer hover:bg-black hover:text-white transition-colors",children:e(R,{})})]}),e("img",{src:`/images/candidates/${a.image}`,alt:a.name,class:"w-full h-full rounded-md object-cover object-center bg-blue-600 absolute top-0 mix-blend-luminosity group-hover:mix-blend-normal transition-all"})]}),e("h2",{class:"self-center text-xs font-semibold",children:a.name})]})}function M({candidates:a,isChanging:i,votes:n}){return e("section",{class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-5 xl:auto-rows-[175px] auto-rows-[300px] gap-2",children:a?.map((l,t)=>{const o=n.byCategory?.indexOf(l.id)??-1;return e(A,{candidate:l,isChanging:i,index:t,handleVote:n.handleVote,voteIndex:o+1})})})}function P(){return e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 rotate-180",children:e("path",{fill:"currentColor",stroke:"transparent","stroke-linecap":"round","stroke-linejoin":"round",d:"m13.04 1.429 10.218 10.216a.5.5 0 0 1 0 .708L13.04 22.571a.5.5 0 0 1-.707 0l-2.756-2.756a.5.5 0 0 1-.014-.693L14.1 14.5h-13a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h13L9.566 4.878a.5.5 0 0 1 .012-.7l2.755-2.754a.5.5 0 0 1 .707.005Z"})})}function L(){return e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6",children:e("path",{fill:"currentColor",stroke:"transparent","stroke-linecap":"round","stroke-linejoin":"round",d:"m13.04 1.429 10.218 10.216a.5.5 0 0 1 0 .708L13.04 22.571a.5.5 0 0 1-.707 0l-2.756-2.756a.5.5 0 0 1-.014-.693L14.1 14.5h-13a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h13L9.566 4.878a.5.5 0 0 1 .012-.7l2.755-2.754a.5.5 0 0 1 .707.005Z"})})}function j({totalPages:a,handleNext:i,handlePrevious:n,currentPage:l}){return e("section",{class:"flex gap-4 items-center",children:[e("button",{onClick:n,class:"pagination",children:e(P,{})}),e("p",{class:"text-xl font-semibold items-center flex gap-2",children:[e("span",{children:"categoria"}),e("span",{class:"text-3xl font-black",children:[l,"/",a]})]}),e("button",{onClick:i,class:"pagination",children:e(L,{})})]})}function N({user:a}){return e("section",{class:"flex gap-4 flex-1",children:[e("img",{src:a.image??"",alt:`Imagen de foto de perfil de ${a.name}`,class:"w-12 h-12 rounded-full object-cover object-center"}),e("article",{class:"flex flex-col gap-2justify-start",children:[e("h2",{class:"text-primary font-bold text-xl",children:a.name}),e("button",{class:"hover:underline text-sm self-start capitalize",id:"logout",children:"cerrar sección"})]})]})}function O({user:a,page:i,handlePage:n}){return e("footer",{class:"flex justify-between gap-4 bg-black/50 backdrop-blur-xl px-8 py-4 items-center rounded",children:[e(N,{user:a}),e(j,{handleNext:n.next,handlePrevious:n.previous,currentPage:i.current,totalPages:i.total})]})}function z({currentPage:a}){const[i,n]=g({}),[l,t]=g(!1);return f(()=>{t(!0);async function o(){const b=await(await fetch(`/api/candidates.json?category=${a-1}`)).json();n(b)}o(),setTimeout(()=>t(!1),1500)},[a]),{candidatesByCategory:i,isChanging:l}}const w=12;function T({handleMissingVotes:a}){const[i,n]=g(1);return{handlePage:{next:()=>{if(i>=w){a()||n(13);return}n(i+1)},previous:()=>{if(i<=1)return n(w);n(i-1)},goToSpecificPage:r=>{r>w||n(r)}},page:{current:i,total:w}}}const S=12,k=4;let V=Array.from({length:S},()=>[]);function D(){const[a,i]=g(V),[n,l]=g(null);f(()=>{(async()=>{const u=await(await fetch("/api/votes")).json();i(u.votes)})()},[]);const t=()=>{const s=a.some(c=>c.length!==k);return l(s),setTimeout(()=>l(null),5e3),s},{page:o,handlePage:r}=T({handleMissingVotes:t}),b=z({currentPage:o.current}),p=({candidateID:s})=>{const c=a[o.current-1];if(c.includes(s)){const u=c.filter(d=>d!==s);return i(d=>d.with(o.current-1,u))}if(c.length<4)return i(u=>{const d=u.with(o.current-1,[...c,s]);return d.every(h=>h.length===k)&&l(!1),d})};return{votes:{all:a,hasMissingVotes:n,byCategory:a[o.current-1],maxVotes:k,handleVote:p,handleMissingVotes:t},pagination:{page:o,handlePage:r},candidates:b}}function J({user:a}){const{votes:i,candidates:{candidatesByCategory:n,isChanging:l},pagination:{page:t,handlePage:o}}=D();return e("section",{class:"max-w-7xl w-full flex flex-col gap-8",children:t.current>t.total?e(v,{previousPage:o.previous,allVotes:i.all,goToSpecificPage:o.goToSpecificPage}):e(x,{children:[e(C,{votes:i,categoryName:n?.categoryName??"",isChanging:l}),e(M,{candidates:n?.candidates??[],isChanging:l,votes:i}),e(O,{user:a??{},page:t,handlePage:o})]})})}export{J as VoteSystem};
